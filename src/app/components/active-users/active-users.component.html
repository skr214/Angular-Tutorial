<div class="container">
    <!-- Left panel: user list -->
    <div class="user-list">
        <div class="search-bar">
            <input type="text" placeholder="ðŸ” Search by email..." [(ngModel)]="searchEmail" />
        </div>

        <ul>
            <li *ngFor="let user of users | filterByEmail:searchEmail" (click)="selectUser(user)"
                [class.active]="user === selectedUser">
                <div class="name">{{ user.firstName }} {{ user.lastName }}</div>
                <div class="role">{{ user.role }}</div>
            </li>
        </ul>
    </div>

    <!-- Right side detail card -->
    <div class="user-details" *ngIf="selectedUser">
        <div class="card">
            <h2>{{ selectedUser.firstName }} {{ selectedUser.lastName }}</h2>
            <p><strong>ID:</strong> {{ selectedUser.id }}</p>
            <p><strong>Email:</strong> {{ selectedUser.email }}</p>
            <p><strong>Phone:</strong> {{ selectedUser.phoneNumber }}</p>
            <p><strong>Username:</strong> {{ selectedUser.username }}</p>
            <p><strong>Account Type:</strong> {{ selectedUser.accountType | titlecase}}</p>
            <p><strong>Gender:</strong> {{ selectedUser.gender | titlecase}}</p>
            <p><strong>Password:</strong> {{ selectedUser.password }}</p>
            <p><strong>Accepted Terms:</strong> {{ selectedUser.acceptTerms ? 'Yes' : 'No' }}</p>

            <div class="action-buttons">
                <button class="update-btn" (click)="openUpdateModal(selectedUser)" data-bs-toggle="modal"
                    data-bs-target="#updateUserModal">Update</button>
                <button class="delete-btn" (click)="deleteUser(selectedUser)">Delete</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="updateUserModal" tabindex="-1" aria-labelledby="updateUserModalLabel" aria-hidden="true"
    #updateUserModal>
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">

            <!-- Header -->
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="updateUserModalLabel">Edit User</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>

            <!-- Body -->
            <div class="modal-body">
                <form [formGroup]="updateForm">
                    <div class="row g-3">

                        <!-- First + Last Name -->
                        <div class="col-md-6">
                            <label class="form-label">First Name</label>
                            <input class="form-control" formControlName="firstName" placeholder="Enter first name">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Last Name</label>
                            <input class="form-control" formControlName="lastName" placeholder="Enter last name">
                        </div>

                        <!-- Email + Phone -->
                        <div class="col-md-6">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" formControlName="email"
                                placeholder="example@mail.com">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" formControlName="phoneNumber"
                                placeholder="+91 98765 43210">
                        </div>

                        <!-- Account Type + Gender -->
                        <div class="col-md-6">
                            <label class="form-label">Account Type</label>
                            <select class="form-select" formControlName="accountType">
                                <option value="">Select account type</option>
                                <option value="admin">Admin</option>
                                <option value="superadmin">Superadmin</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Gender</label>
                            <select class="form-select" formControlName="gender">
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <!-- Password + Confirm Password -->
                        <div class="col-md-6">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" formControlName="password"
                                placeholder="Enter password">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" placeholder="Re-enter password">
                        </div>

                    </div>
                </form>
            </div>

            <!-- Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="saveUser()">Save Changes</button>
            </div>

        </div>
    </div>
</div>